
<div class="modal-overlay" *ngIf="show" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">{{modalTitle}}</h2>
      <button class="modal-close-btn" (click)="onClose()">
        <i class="icon-x"></i>
      </button>
    </div>

    <form class="modal-body" (ngSubmit)="onSubmit()" #patientForm="ngForm">
      <!-- Informações Básicas -->
      <div class="form-section">
        <h3 class="section-title">Informações Básicas</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="nome" class="form-label">Nome *</label>
            <input type="text" id="nome" name="nome" [(ngModel)]="formData.nome" class="form-input" placeholder="Nome completo" required />
          </div>
          <div class="form-group">
            <label for="cpf" class="form-label">CPF</label>
            <input type="text" id="cpf" name="cpf" [(ngModel)]="formData.cpf" class="form-input" placeholder="000.000.000-00" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="birthDate" class="form-label">Data de Nascimento *</label>
            <input type="date" id="birthDate" name="birthDate" [(ngModel)]="formData.birthDate" class="form-input" required />
          </div>
          <div class="form-group">
            <label for="age" class="form-label">Idade *</label>
            <input type="number" id="age" name="age" [(ngModel)]="formData.age" class="form-input" required />
          </div>
        </div>
      </div>

      <!-- Informações Clínicas -->
      <div class="form-section">
        <h3 class="section-title">Informações Clínicas</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="spectrum" class="form-label">Espectro *</label>
            <input type="text" id="spectrum" name="spectrum" [(ngModel)]="formData.spectrum" class="form-input" placeholder="Ex: Autismo Leve" required />
          </div>
          <div class="form-group">
            <label for="therapist" class="form-label">Terapeuta *</label>
            <input type="text" id="therapist" name="therapist" [(ngModel)]="formData.therapist" class="form-input" placeholder="Nome do terapeuta" required />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="status" class="form-label">Status *</label>
            <select id="status" name="status" [(ngModel)]="formData.status" class="form-select" required>
              <option value="active">Ativo</option>
              <option value="inactive">Inativo</option>
              <option value="waiting">Aguardando</option>
            </select>
          </div>
          <div class="form-group">
            <label for="lastSession" class="form-label">Última Sessão</label>
            <input type="text" id="lastSession" name="lastSession" [(ngModel)]="formData.lastSession" class="form-input" placeholder="dd/mm/aaaa" />
          </div>
        </div>
      </div>

      <!-- Progresso -->
      <div class="form-section">
        <h3 class="section-title">Progresso</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="progressLevel" class="form-label">Progresso (%)</label>
            <input type="number" id="progressLevel" name="progressLevel" [(ngModel)]="formData.progressLevel" class="form-input" min="0" max="100" />
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="modal-btn modal-btn-secondary" (click)="onClose()">
          <i class="icon-x"></i>
          Cancelar
        </button>
        <button type="submit" class="modal-btn modal-btn-primary" [disabled]="!isFormValid()">
          <i class="icon-save"></i>
          {{submitButtonText}}
        </button>
      </div>
    </form>
  </div>
</div>