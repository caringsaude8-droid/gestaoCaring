<div class="tea-calendario-container">
  <!-- Header -->
  <div class="calendario-header">
    <div class="header-info">
      <h1 class="calendario-title">Calendário TEA</h1>
      <p class="calendario-subtitle">Agendamento e acompanhamento de sessões</p>
    </div>
    <button class="new-appointment-btn" (click)="openNewAppointment()">
      <i class="icon-plus"></i>
      Nova Sessão
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-section">
    <div class="stats-grid">
      <div class="stat-card stat-scheduled">
        <div class="stat-icon">
          <i class="icon-calendar"></i>
        </div>
        <div class="stat-content">
          <h3 class="stat-title">Agendadas</h3>
          <p class="stat-value">{{getMonthStats().scheduled}}</p>
        </div>
      </div>
      
      <div class="stat-card stat-completed">
        <div class="stat-icon">
          <i class="icon-check"></i>
        </div>
        <div class="stat-content">
          <h3 class="stat-title">Concluídas</h3>
          <p class="stat-value">{{getMonthStats().completed}}</p>
        </div>
      </div>
      
      <div class="stat-card stat-cancelled">
        <div class="stat-icon">
          <i class="icon-x"></i>
        </div>
        <div class="stat-content">
          <h3 class="stat-title">Canceladas</h3>
          <p class="stat-value">{{getMonthStats().cancelled}}</p>
        </div>
      </div>
      
      <div class="stat-card stat-no-show">
        <div class="stat-icon">
          <i class="icon-alert"></i>
        </div>
        <div class="stat-content">
          <h3 class="stat-title">Faltas</h3>
          <p class="stat-value">{{getMonthStats().noShow}}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar Controls -->
  <div class="calendar-controls">
    <div class="controls-left">
      <button class="control-btn" (click)="previousMonth()">
        <i class="icon-chevron-left"></i>
      </button>
      <h2 class="current-month">{{getCurrentMonthYear()}}</h2>
      <button class="control-btn" (click)="nextMonth()">
        <i class="icon-chevron-right"></i>
      </button>
    </div>
    
    <div class="controls-right">
      <select class="therapist-filter" [(ngModel)]="selectedTherapist" (change)="filterAppointments()">
        <option value="">Todos os Terapeutas</option>
        <option value="Dr. Maria Santos">Dr. Maria Santos</option>
        <option value="Dr. Pedro Lima">Dr. Pedro Lima</option>
        <option value="Dr. Carla Souza">Dr. Carla Souza</option>
      </select>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-container">
    <!-- Week Days Header -->
    <div class="calendar-header-days">
      <div class="day-header" *ngFor="let day of weekDays">{{day}}</div>
    </div>
    
    <!-- Calendar Days -->
    <div class="calendar-grid">
      <div *ngFor="let day of calendarDays" 
           class="calendar-day"
           [class.other-month]="!day.isCurrentMonth"
           [class.today]="day.isToday"
           [class.has-appointments]="day.appointments.length > 0"
           (click)="selectDay(day)">
        
        <div class="day-number">{{day.date.getDate()}}</div>
        
        <div class="day-appointments" *ngIf="day.appointments.length > 0">
          <div *ngFor="let appointment of day.appointments.slice(0, 2)" 
               class="appointment-dot"
               [class]="'status-' + appointment.status"
               [title]="appointment.patientName + ' - ' + appointment.time">
            <span class="appointment-time">{{appointment.time}}</span>
          </div>
          
          <div *ngIf="day.appointments.length > 2" 
               class="more-appointments"
               [title]="'Mais ' + (day.appointments.length - 2) + ' sessões'">
            +{{day.appointments.length - 2}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Today's Appointments -->
  <div class="todays-appointments" *ngIf="todaysAppointments.length > 0">
    <h3 class="section-title">Sessões de Hoje</h3>
    <div class="appointments-list">
      <div *ngFor="let appointment of todaysAppointments" 
           class="appointment-card"
           [class]="'status-' + appointment.status">
        
        <div class="appointment-time-badge">
          <span class="time">{{appointment.time}}</span>
          <span class="duration">{{appointment.duration}}min</span>
        </div>
        
        <div class="appointment-info">
          <h4 class="patient-name">{{appointment.patientName}}</h4>
          <p class="appointment-details">
            <span class="therapy-type">{{appointment.type}}</span>
            <span class="therapist">{{appointment.therapistName}}</span>
            <span class="room">{{appointment.room}}</span>
          </p>
          <p *ngIf="appointment.notes" class="appointment-notes">{{appointment.notes}}</p>
        </div>
        
        <div class="appointment-status">
          <span class="status-badge" [class]="'badge-' + appointment.status">
            {{appointment.status === 'scheduled' ? 'Agendada' : 
              appointment.status === 'completed' ? 'Concluída' : 
              appointment.status === 'cancelled' ? 'Cancelada' : 'Falta'}}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>